{% extends 'Hr/base_hr.html' %}
{% load static %}
{% load django_permissions %}

{% block title %}تصدير البيانات - الموارد البشرية{% endblock %}

{% block page_title %}تصدير البيانات{% endblock %}

{% block breadcrumb %}
<li class="breadcrumb-item"><a href="{% url 'accounts:home' %}">الرئيسية</a></li>
<li class="breadcrumb-item"><a href="{% url 'Hr:dashboard' %}">الموارد البشرية</a></li>
<li class="breadcrumb-item active">تصدير البيانات</li>
{% endblock %}

{% block content %}
<div class="container">
    <h1 class="my-4">تصدير البيانات</h1>

    <div class="row">
        {% if perms.Hr.export_employee_data or user|is_admin %}
        <div class="col-md-4 mb-4">
            <div class="card">
                <div class="card-body">
                    <h5 class="card-title">تصدير بيانات الموظفين</h5>
                    <p class="card-text">تصدير قائمة الموظفين مع كافة البيانات الأساسية.</p>
                    <div class="btn-group">
                        <a href="{% url 'Hr:reports:export_employees' 'excel' %}" class="btn btn-success">
                            <i class="fas fa-file-excel me-1"></i>
                            Excel
                        </a>
                        <a href="{% url 'Hr:reports:export_employees' 'csv' %}" class="btn btn-info">
                            <i class="fas fa-file-csv me-1"></i>
                            CSV
                        </a>
                    </div>
                </div>
            </div>
        </div>
        {% endif %}

        {% if perms.Hr.export_attendance_data or user|is_admin %}
        <div class="col-md-4 mb-4">
            <div class="card">
                <div class="card-body">
                    <h5 class="card-title">تصدير بيانات الحضور</h5>
                    <p class="card-text">تصدير سجلات الحضور والانصراف.</p>
                    <div class="btn-group">
                        <a href="{% url 'Hr:reports:export_attendance' 'excel' %}" class="btn btn-success">
                            <i class="fas fa-file-excel me-1"></i>
                            Excel
                        </a>
                        <a href="{% url 'Hr:reports:export_attendance' 'csv' %}" class="btn btn-info">
                            <i class="fas fa-file-csv me-1"></i>
                            CSV
                        </a>
                    </div>
                </div>
            </div>
        </div>
        {% endif %}

        {% if perms.Hr.export_leave_data or user|is_admin %}
        <div class="col-md-4 mb-4">
            <div class="card">
                <div class="card-body">
                    <h5 class="card-title">تصدير بيانات الإجازات</h5>
                    <p class="card-text">تصدير سجلات الإجازات للموظفين.</p>
                    <div class="btn-group">
                        <a href="{% url 'Hr:reports:export_leaves' 'excel' %}" class="btn btn-success">
                            <i class="fas fa-file-excel me-1"></i>
                            Excel
                        </a>
                        <a href="{% url 'Hr:reports:export_leaves' 'csv' %}" class="btn btn-info">
                            <i class="fas fa-file-csv me-1"></i>
                            CSV
                        </a>
                    </div>
                </div>
            </div>
        </div>
        {% endif %}

        {% if perms.Hr.export_payroll_data or user|is_admin %}
        <div class="col-md-4 mb-4">
            <div class="card">
                <div class="card-body">
                    <h5 class="card-title">تصدير بيانات الرواتب</h5>
                    <p class="card-text">تصدير كشوف الرواتب الشهرية.</p>
                    <div class="btn-group">
                        <a href="{% url 'Hr:reports:export_payroll' 'excel' %}" class="btn btn-success">
                            <i class="fas fa-file-excel me-1"></i>
                            Excel
                        </a>
                        <a href="{% url 'Hr:reports:export_payroll' 'csv' %}" class="btn btn-info">
                            <i class="fas fa-file-csv me-1"></i>
                            CSV
                        </a>
                    </div>
                </div>
            </div>
        </div>
        {% endif %}
    </div>

    {% if not perms.Hr.export_employee_data and not perms.Hr.export_attendance_data and not perms.Hr.export_leave_data and not perms.Hr.export_payroll_data and not user|is_admin %}
    <div class="alert alert-warning">
        <i class="fas fa-exclamation-triangle me-2"></i>
        عذراً، لا تملك الصلاحيات اللازمة لتصدير البيانات.
    </div>
    {% endif %}
</div>
{% endblock %}
